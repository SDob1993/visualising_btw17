{
    "collab_server" : "",
    "contents" : "install.packages(\"rjson\")\ninstall.packages(\"igraph\")\nrequire(rjson)\nrequire(tidyverse)\nrequire(stringr)\nrequire(dplyr)\nrequire(igraph)\n\n#get data and filter\ntwitter_data_bc<-read.csv(\"twitter_data.csv\")\ntwitter_data_bc<-twitter_data_bc%>%filter(weeksTillElection<7)\n\n#get party and weets per week\ntwitter_data_bcparty<-twitter_data_bc%>%select(ID,party,twitter.handle,weeksTillElection)\ntwitter_data_bcparty<-twitter_data_bcparty%>%group_by(party,weeksTillElection)%>%summarise(freq = n())\n\n#get all tweets per week\ntwitter_data_bcall<-twitter_data_bc%>%select(ID,twitter.handle,weeksTillElection)\ntwitter_data_bcall<-twitter_data_bcall%>%group_by(weeksTillElection)%>%summarise(freqall = n())\n\n#join\nmaindfbc<-left_join(twitter_data_bcparty,twitter_data_bcall)\nmaindfbc<-maindfbc%>%mutate(percentage=(freq/freqall))\n\n#join db sum\nmaindfbcsum<-left_join(twitter_data_bcparty,twitter_data_bcall)\nmaindfbcsumspread<-maindfbcsum%>%spread(weeksTillElection,freq)\n\n\n#creating df per week\nweek6<-maindfbc%>%filter(weeksTillElection==6)\nweek5<-maindfbc%>%filter(weeksTillElection==5)\nweek4<-maindfbc%>%filter(weeksTillElection==4)\nweek3<-maindfbc%>%filter(weeksTillElection==3)\nweek2<-maindfbc%>%filter(weeksTillElection==2)\nweek1<-maindfbc%>%filter(weeksTillElection==1)\nweek0<-maindfbc%>%filter(weeksTillElection==0)\nweek01<-maindfbc%>%filter(weeksTillElection==-1)\nweek02<-maindfbc%>%filter(weeksTillElection==-2)\nweek03<-maindfbc%>%filter(weeksTillElection==-3)\n\nweek6<-toJSON(unname(split(week6, 1:nrow(week6))))\nweek5<-toJSON(unname(split(week5, 1:nrow(week5))))\nweek4<-toJSON(unname(split(week4, 1:nrow(week4))))\nweek3<-toJSON(unname(split(week3, 1:nrow(week3))))\nweek2<-toJSON(unname(split(week2, 1:nrow(week2))))\nweek1<-toJSON(unname(split(week1, 1:nrow(week1))))\nweek0<-toJSON(unname(split(week0, 1:nrow(week0))))\nweek01<-toJSON(unname(split(week01, 1:nrow(week01))))\nweek02<-toJSON(unname(split(week02, 1:nrow(week02))))\nweek03<-toJSON(unname(split(week03, 1:nrow(week03))))\n\nwrite(week6, \"week6.json\")\nwrite(week5, \"week5.json\")\nwrite(week4, \"week4.json\")\nwrite(week3, \"week3.json\")\nwrite(week2, \"week2.json\")\nwrite(week1, \"week1.json\")\nwrite(week0, \"week0.json\")\nwrite(week01, \"week01.json\")\nwrite(week02, \"week02.json\")\nwrite(week03, \"week03.json\")\n\n#sum weeks\nweek6n<-maindfbc%>%filter(weeksTillElection==6)\n\nweek5n<-left_join(week6n,week5,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week5n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek4n<-left_join(week5n,week4,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week4n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek3n<-left_join(week4n,week3,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week3n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek2n<-left_join(week3n,week2,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week2n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek1n<-left_join(week2n,week1,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week1n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek0n<-left_join(week1n,week0,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week0n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek01n<-left_join(week0n,week01,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week01n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek02n<-left_join(week01n,week02,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week02n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek03n<-left_join(week02n,week03,by=\"party\")%>%mutate(freq=freq.x+freq.y)%>%mutate(freqall=freqall.x+freqall.y)%>%\n  select(party,weeksTillElection.y,freq,freqall)\ncolnames(week03n)<-c(\"party\",\"weeksTillElection\",\"freq\",\"freqall\")\n\nweek6n<-week6n%>%mutate(percentage=freq/freqall)\nweek5n<-week5n%>%mutate(percentage=freq/freqall)\nweek4n<-week4n%>%mutate(percentage=freq/freqall)\nweek3n<-week3n%>%mutate(percentage=freq/freqall)\nweek2n<-week2n%>%mutate(percentage=freq/freqall)\nweek1n<-week1n%>%mutate(percentage=freq/freqall)\nweek0n<-week0n%>%mutate(percentage=freq/freqall)\nweek01n<-week01n%>%mutate(percentage=freq/freqall)\nweek02n<-week02n%>%mutate(percentage=freq/freqall)\nweek03n<-week03n%>%mutate(percentage=freq/freqall)\n\nweek6n<-toJSON(unname(split(week6n, 1:nrow(week6n))))\nweek5n<-toJSON(unname(split(week5n, 1:nrow(week5n))))\nweek4n<-toJSON(unname(split(week4n, 1:nrow(week4n))))\nweek3n<-toJSON(unname(split(week3n, 1:nrow(week3n))))\nweek2n<-toJSON(unname(split(week2n, 1:nrow(week2n))))\nweek1n<-toJSON(unname(split(week1n, 1:nrow(week1n))))\nweek0n<-toJSON(unname(split(week0n, 1:nrow(week0n))))\nweek01n<-toJSON(unname(split(week01n, 1:nrow(week01n))))\nweek02n<-toJSON(unname(split(week02n, 1:nrow(week02n))))\nweek03n<-toJSON(unname(split(week03n, 1:nrow(week03n))))\n\nwrite(week6n, \"week6n.json\")\nwrite(week5n, \"week5n.json\")\nwrite(week4n, \"week4n.json\")\nwrite(week3n, \"week3n.json\")\nwrite(week2n, \"week2n.json\")\nwrite(week1n, \"week1n.json\")\nwrite(week0n, \"week0n.json\")\nwrite(week01n, \"week01n.json\")\nwrite(week02n, \"week02n.json\")\nwrite(week03n, \"week03n.json\")\n",
    "created" : 1513337043886.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1862686405",
    "id" : "548C63C4",
    "lastKnownWriteTime" : 1513635050,
    "last_content_update" : 1513635050405,
    "path" : "C:/Users/simon/Desktop/css/AbgabeCSSWS17DobioszWolff/RData/barchartdata.R",
    "project_path" : "barchartdata.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}